<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
    "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="jp.co.myapp.api.domain.repository.shinsaMemo.ShinsaMemoRepository">
<select id="getShinsaMemoInfo" parameterType="jp.co.myapp.api.app.request.RetrieveShinsaMemoRequest" resultMap="shinsaMemoMap">
<![CDATA[
    SELECT
        target,
        authority,
        user_id,
        user_name,
        memo,
        add_date
    FROM
        INSPECTION_MEMO
    WHERE
        entry_no = #{entryNo}
        AND policy = #{policyNo}
        AND delete_flg = '0'
    ORDER BY
        add_date
]]>
</select>

<resultMap id="shinsaMemoMap" type="ShinsaMemoInfoBean">
	<result property="inspectionObject" column="target" ></result>
	<result property="insuranceCompanyAgency" column="authority" ></result>
	<result property="userID" column="user_id" ></result>
	<result property="userName" column="user_name" ></result>
	<result property="inspectionMemo" column="memo" ></result>
	<result property="createTime" column="add_date" ></result>
</resultMap>

<insert id="insertShinsaMemo" parameterType="jp.co.myapp.api.domain.model.EntryShinsaMemoBean">
<![CDATA[
    INSERT INTO INSPECTION_MEMO
        (
        entry_no,
        policy,
        target,
        authority,
        user_id,
        user_name,
        memo,
        delete_flg,
        add_date
        )
    VALUES (
        #{entryNo},
        #{policyNo},
        #{inspectionObject},
        #{insuranceCompanyAgency},
        #{userID},
        #{userName},
        #{inspectionMemo},
        '0',
        #{createTime}
)
]]>
</insert>
</mapper>