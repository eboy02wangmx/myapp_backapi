<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
    "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="jp.co.myapp.api.domain.repository.user.UserRepository">

	<resultMap id="userMap" type="UserBean">
		<id property="userName" column="userid" javaType="java.lang.String"></id>
		<result property="password" column="password" javaType="java.lang.String"></result>
		<result property="customId" column="customid" javaType="java.lang.String"></result>
		<result property="kengen" column="kengen" javaType="java.lang.String"></result>
		<result property="yukokbn" column="yukokbn" javaType="java.lang.String"></result>
	</resultMap>

    <select id="findOne" parameterType="string" resultMap="userMap">
        select userid, password, customId, kengen, yukokbn
        from user_info
        where userid = #{userId}
    </select>

	<select id="selectContractDate" parameterType="string" resultType="java.util.Map">
        select t1.keiyakushiki, t1.keiyakushuki
		from user_info t1
		where t1.kengen = '2'
			and t1.customid = (select customid from user_info t2 where t2.userid = #{userId})
    </select>

</mapper>
