<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
    "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="jp.co.myapp.api.domain.repository.acceptlimit.AcceptLimitInputRepository">
<select id="countByEntryNoAndAgencyCd" resultType="int">
<![CDATA[
  SELECT
    count(*)
  FROM
      ACCEPT_LIMIT_INPUT
  WHERE
    ENTRY_NO = #{entryNo}
    AND DAIRI_CD = #{agencyCd}
]]>
</select>

<update id="updateAcceptLimitInput" parameterType="jp.co.myapp.api.app.request.AcceptLimitInputRequest">
<![CDATA[
  UPDATE
        ACCEPT_LIMIT_INPUT
     SET
        screen_id = #{screenId},
        accept_limit_confirm_code = #{acceptLimitConfirmCode},
        UPD_DATE = #{newDate},
        accept_limit_rules = #{acceptLimitRules}
   WHERE
        entry_no = #{entryNo}
        AND dairi_cd = #{agencyCd}
]]>
</update>

<insert id="insertAcceptLimitInput" parameterType="jp.co.myapp.api.app.request.AcceptLimitInputRequest">
<![CDATA[
    INSERT INTO ACCEPT_LIMIT_INPUT
        (
        entry_no,
        dairi_cd,
        screen_id,
        accept_limit_confirm_code,
        ADD_DATE,
        accept_limit_rules
        )
    VALUES (
        #{entryNo},
        #{agencyCd},
        #{screenId},
        #{acceptLimitConfirmCode},
        #{newDate},
        #{acceptLimitRules}
)
]]>
</insert>
</mapper>